import { merge } from "lodash";
import moment from "moment";
import ReactApexChart from "react-apexcharts";
// material
import { Card, CardHeader, Box } from "@mui/material";
//
import BaseOptionChart from "./BaseOptionChart";

// ----------------------------------------------------------------------

const IssueFrequency = (data) => {
  var labels = ['2021-11', '2021-12', '2022-01', '2022-02', '2022-03', '2022-04', '2022-05', '2022-06', '2022-07', '2022-08', '2022-09', '2022-10', '2022-11'];
  var number = ['42395', '43315', '44389', '45305', '46255', '47286', '48470', '49827', '50952', '52129', '53282', '54607', '55535'];
  let per_month = ['1053', '866', '1025', '861', '909', '985', '1125', '1269', '1075', '1140', '1103', '1293', '1273'];


  // for (var interval in data) {
  //   labels.push(interval);
  //   number.push(data[interval]);
  // }
  let month = ['2017-01', '2017-02', '2017-03', '2017-04', '2017-05', '2017-06', '2017-07', '2017-08', '2017-09', '2017-10', '2017-11', '2017-12', '2018-01', '2018-02', '2018-03', '2018-04', '2018-05', '2018-06', '2018-07', '2018-08', '2018-09', '2018-10', '2018-11', '2018-12', '2019-01', '2019-02', '2019-03', '2019-04', '2019-05', '2019-06', '2019-07', '2019-08', '2019-09', '2019-10', '2019-11', '2019-12', '2020-01', '2020-02', '2020-03', '2020-04', '2020-05', '2020-06', '2020-07', '2020-08', '2020-09', '2020-10', '2020-11', '2020-12', '2021-01', '2021-02', '2021-03', '2021-04', '2021-05', '2021-06', '2021-07', '2021-08', '2021-09', '2021-10', '2021-11', '2021-12', '2022-01', '2022-02', '2022-03', '2022-04', '2022-05', '2022-06', '2022-07', '2022-08', '2022-09', '2022-10', '2022-11', '2022-12']
  let PR_heat = [1223, 2689, 1694, 1534, 1990, 2306,
    2653, 2586, 3068, 4894, 5014, 5907, 7490, 7263,
    8418, 10021, 8472, 15750, 16501, 18330, 14614,
    16316, 17043, 14137, 15170, 14558, 14637, 21681,
    21175, 19397, 18197, 20621, 25004, 25815, 23954,
    13455, 12833, 15625, 25130, 27043, 21771, 20758,
    20608, 22945, 26186, 19081, 24396, 22097, 21702,
    23840, 27478, 35356, 23464, 28044, 25835, 26450,
    23038, 4046, 28272, 22694, 22729, 21040, 21333,
    22628, 24764, 31216, 23574, 22210, 23409, 26032,
    27133, 11568]
  let PR_total = [78, 178, 302, 407, 525, 645, 784, 923, 1064, 1325, 1607, 1830, 2135, 2418, 2781, 3265, 3703, 4320, 4914, 5556, 6177, 6907, 7614, 8128, 8689, 9286, 9994, 10924,
    11776, 12580, 13419, 14301, 15389, 16672, 17783, 18527, 19221, 19948, 21211, 22470, 23624, 24659, 25609, 26546, 27749, 28792, 29778, 30684, 31620, 32707, 34001,
    35579, 36649, 37887, 38898, 40083, 41144, 41310, 42395, 43315, 44389, 45305, 46255, 47286, 48470, 49827, 50952, 52129, 53282, 54607, 55915, 56478];
  const CHART_DATA = [
    {
      name: "PR Heat",
      type: "line",
      data: PR_heat,

    }
    ,
    {
      name: "total PR",
      type: "line",
      data: PR_total
    }
  ];
  const chartOptions = merge(BaseOptionChart(), {
    stroke: { width: [5, 5] },
    plotOptions: { bar: { columnWidth: "11%", borderRadius: 4 } },
    // fill: { type: ["gradient"] },
    colors: ["#ff0033", "#0968F7"],
    labels: month,
    xaxis: { type: "time" },
    yaxis: [{
      title: {
        text: 'PR HEAT',
        style: {
          color: "#ff0033",
          fontSize: '20px',
        }
      },

    }, {
      opposite: true,
      title: {
        text: 'Total PR',
        style: {
          color: "#0968F7",
          fontSize: '20px',
        }
      }
    }],
    legend: {
      show: true
    }
    // tooltip: {
    //   shared: true,
    //   intersect: false,
    //   y: {
    //     formatter: (y) => {
    //       if (typeof y !== "undefined") {
    //         return `${y.toFixed(0)}`;
    //       }
    //       return y;
    //     },
    //   },
    // },
  });

  return (
    <Card>
      <CardHeader title="Pull Requests History" />
      <Box sx={{ p: 3, pb: 1 }} dir="ltr">
        <ReactApexChart
          type="line"
          series={CHART_DATA}
          options={chartOptions}
          height={500}
        />
      </Box>
    </Card>
  );
};

export default IssueFrequency;
